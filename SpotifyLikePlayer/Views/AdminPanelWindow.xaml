<Window x:Class="SpotifyLikePlayer.Views.AdminPanelWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
		xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
		xmlns:converters="clr-namespace:SpotifyLikePlayer.Converters"
        xmlns:local="clr-namespace:SpotifyLikePlayer.Views" xmlns:services="clr-namespace:SpotifyLikePlayer.Services" d:DataContext="{d:DesignInstance Type=services:MediaPlayerService}"
		mc:Ignorable="d"
        Title="Админ-Панель" Height="600" Width="900"
		WindowStartupLocation="CenterOwner"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
		x:Name="MainContainer">
	<Window.Resources>
		<BitmapImage x:Key="DefaultCover" UriSource="/music.png"/>
		<Style x:Key="InvisibleRepeatButtonStyle" TargetType="RepeatButton">
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="RepeatButton">
						<Border Background="Transparent"/>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>
		<Style x:Key="MediaPlayerSliderStyle" TargetType="Slider">
			<Setter Property="SnapsToDevicePixels" Value="True"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="Slider">
						<Grid Height="28">
							<Border Height="6" Background="#444" CornerRadius="3" VerticalAlignment="Center" Margin="8,0"/>

							<Track x:Name="PART_Track" IsDirectionReversed="False" VerticalAlignment="Center" Margin="8,0">
								<Track.DecreaseRepeatButton>
									<RepeatButton Style="{StaticResource InvisibleRepeatButtonStyle}">
										<RepeatButton.Template>
											<ControlTemplate TargetType="RepeatButton">
												<Border Background="#1DB954" CornerRadius="3" Height="7" VerticalAlignment="Center"/>
											</ControlTemplate>
										</RepeatButton.Template>
									</RepeatButton>
								</Track.DecreaseRepeatButton>
								<Track.IncreaseRepeatButton>
									<RepeatButton Style="{StaticResource InvisibleRepeatButtonStyle}"/>
								</Track.IncreaseRepeatButton>
								<Track.Thumb>
									<Thumb x:Name="PART_Thumb" Width="22" Height="22" Cursor="Hand" VerticalAlignment="Center">
										<Thumb.Template>
											<ControlTemplate TargetType="Thumb">
												<Ellipse Fill="#1DB954" Stroke="#FFFFFF" StrokeThickness="1.5" Opacity="0.9"/>
											</ControlTemplate>
										</Thumb.Template>
									</Thumb>
								</Track.Thumb>
							</Track>
						</Grid>

						<ControlTemplate.Triggers>
							<Trigger Property="IsMouseOver" Value="True">
								<Setter TargetName="PART_Thumb" Property="Opacity" Value="1" />
							</Trigger>
							<Trigger SourceName="PART_Thumb" Property="IsDragging" Value="True">
								<Setter TargetName="PART_Thumb" Property="Opacity" Value="1" />
							</Trigger>
						</ControlTemplate.Triggers>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>
		<Style x:Key="VolumeSliderStyle" TargetType="Slider">
			<Setter Property="SnapsToDevicePixels" Value="True"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="Slider">
						<Grid Height="20">
							<Border Height="5" Background="#444" CornerRadius="2.5" VerticalAlignment="Center" Margin="6,0"/>

							<Track x:Name="PART_Track" IsDirectionReversed="False" VerticalAlignment="Center" Margin="6,0">
								<Track.DecreaseRepeatButton>
									<RepeatButton Style="{StaticResource InvisibleRepeatButtonStyle}">
										<RepeatButton.Template>
											<ControlTemplate TargetType="RepeatButton">
												<Border Background="#1DB954" CornerRadius="2.5" Height="5" VerticalAlignment="Center"/>
											</ControlTemplate>
										</RepeatButton.Template>
									</RepeatButton>
								</Track.DecreaseRepeatButton>
								<Track.IncreaseRepeatButton>
									<RepeatButton Style="{StaticResource InvisibleRepeatButtonStyle}"/>
								</Track.IncreaseRepeatButton>
								<Track.Thumb>
									<Thumb x:Name="PART_Thumb" Width="16" Height="16" Cursor="Hand" VerticalAlignment="Center">
										<Thumb.Template>
											<ControlTemplate TargetType="Thumb">
												<Ellipse Fill="#1DB954" Stroke="#FFFFFF" StrokeThickness="1" Opacity="0.85"/>
											</ControlTemplate>
										</Thumb.Template>
									</Thumb>
								</Track.Thumb>
							</Track>
						</Grid>

						<ControlTemplate.Triggers>
							<Trigger Property="IsMouseOver" Value="True">
								<Setter TargetName="PART_Thumb" Property="Opacity" Value="1" />
							</Trigger>
							<Trigger SourceName="PART_Thumb" Property="IsDragging" Value="True">
								<Setter TargetName="PART_Thumb" Property="Opacity" Value="1" />
							</Trigger>
						</ControlTemplate.Triggers>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>
	</Window.Resources>
	<Border CornerRadius="12"
            Background="#2b2b2b"
            Padding="20"
            Margin="20"
            BorderBrush="#444"
            BorderThickness="1">
		<Border.Effect>
			<DropShadowEffect BlurRadius="15" ShadowDepth="0" Color="Black" Opacity="0.6"/>
		</Border.Effect>

		<Grid>
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto"/>
				<RowDefinition Height="*"/>
			</Grid.RowDefinitions>

			<Button Content="×"
                    FontSize="20"
                    FontWeight="Bold"
                    Foreground="#aaa"
                    Background="Transparent"
                    BorderThickness="0"
                    Width="32"
                    Height="32"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Top"
                    Padding="0"
                    Cursor="Hand"
                    Click="CloseButton_Click" Margin="0,-2,0,0">
				<Button.Style>
					<Style TargetType="Button">
						<Setter Property="Template">
							<Setter.Value>
								<ControlTemplate TargetType="Button">
									<Border x:Name="border" Background="{TemplateBinding Background}" CornerRadius="4">
										<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
									</Border>
									<ControlTemplate.Triggers>
										<Trigger Property="IsMouseOver" Value="True">
											<Setter TargetName="border" Property="Background" Value="#333"/>
											<Setter Property="Foreground" Value="White"/>
										</Trigger>
									</ControlTemplate.Triggers>
								</ControlTemplate>
							</Setter.Value>
						</Setter>
					</Style>
				</Button.Style>
			</Button>

			<TextBlock Text="Модерация заявок"
                       FontSize="20"
                       FontWeight="Bold"
                       Foreground="White"
                       Margin="10,0,56,16"/>

			<TabControl Grid.Row="1" Margin="0,10,0,0">
				<TabItem Header="В ожидании" Cursor="Hand">
					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition Height="*"/>
							<RowDefinition Height="Auto"/>
						</Grid.RowDefinitions>

						<ListBox x:Name="PendingRequestsListBox"
                                 Background="#1E1E1E"
                                 Foreground="White"
                                 BorderThickness="0"
                                 ScrollViewer.HorizontalScrollBarVisibility="Disabled"
								  MouseDoubleClick="PendingRequestsListBox_MouseDoubleClick">
							<ListBox.ItemTemplate>
								<DataTemplate>
									<Border Background="#2C2C2C" CornerRadius="8" Padding="16" Margin="0,4">
										<Grid>
											<Grid.ColumnDefinitions>
												<ColumnDefinition Width="Auto"/>
												<ColumnDefinition Width="*"/>
												<ColumnDefinition Width="Auto"/>
											</Grid.ColumnDefinitions>

											<Border Width="60" Height="60" CornerRadius="4" Background="#333" Margin="0,0,12,0">
												<Image Source="{Binding CoverImageSource}" Stretch="UniformToFill"/>
											</Border>

											<StackPanel Grid.Column="1" VerticalAlignment="Center">
												<TextBlock Text="{Binding Title}" FontWeight="Bold" FontSize="16" Foreground="White"/>
												<TextBlock Text="{Binding ArtistName}" Foreground="#AAAAAA" FontSize="14" Margin="0,2,0,0"/>
												<StackPanel Orientation="Horizontal" Margin="0,4,0,0">
													<TextBlock Text="{Binding Genre}" Foreground="#1DB954" FontSize="13" Margin="0,0,12,0"/>
													<TextBlock Text="{Binding ReleaseYear, StringFormat='{}{0} г.'}" Foreground="#AAAAAA" FontSize="13"/>
													<TextBlock Text=" | " Foreground="#AAAAAA" FontSize="13" Margin="0,0,4,0"/>
													<TextBlock Text="{Binding SubmittedAt, StringFormat='{}{0:dd.MM.yyyy HH:mm}'}" Foreground="#AAAAAA" FontSize="13"/>
												</StackPanel>
											</StackPanel>

											<StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
												<Button Content="Одобрить"
                                                        Background="#1DB954"
                                                        Foreground="White"
                                                        BorderThickness="0"
                                                        Padding="12,6"
                                                        Margin="0,0,8,0"
                                                        Cursor="Hand"
                                                        Click="ApproveRequest_Click"
                                                        CommandParameter="{Binding}"/>
												<Button Content="Отклонить"
                                                        Background="#ff5555"
                                                        Foreground="White"
                                                        BorderThickness="0"
                                                        Padding="12,6"
                                                        Margin="0,0,8,0"
                                                        Cursor="Hand"
                                                        Click="RejectRequest_Click"
                                                        CommandParameter="{Binding}"/>
												<Button Content="Удалить"
                                                        Background="#444"
                                                        Foreground="White"
                                                        BorderThickness="0"
                                                        Padding="12,6"
                                                        Cursor="Hand"
                                                        Click="DeleteRequest_Click"
                                                        CommandParameter="{Binding}"/>
											</StackPanel>
										</Grid>
									</Border>
								</DataTemplate>
							</ListBox.ItemTemplate>
						</ListBox>

						<Button Content="Удалить все в ожидающих"
                                Background="#444"
                                Foreground="White"
                                BorderThickness="0"
                                Padding="12,6"
                                Grid.Row="1"
                                HorizontalAlignment="Left"
                                Margin="0,10,0,0"
                                Click="DeleteAllPending_Click"/>
					</Grid>
				</TabItem>

				<TabItem Header="Подтвержденные" Cursor="Hand">
					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition Height="*"/>
							<RowDefinition Height="Auto"/>
						</Grid.RowDefinitions>

						<ListBox x:Name="ApprovedRequestsListBox"
                                 Background="#1E1E1E"
                                 Foreground="White"
                                 BorderThickness="0"
                                 ScrollViewer.HorizontalScrollBarVisibility="Disabled"
								  MouseDoubleClick="ApprovedRequestsListBox_MouseDoubleClick">
							<ListBox.ItemTemplate>
								<DataTemplate>
									<Border Background="#2C2C2C" CornerRadius="8" Padding="16" Margin="0,4">
										<Grid>
											<Grid.ColumnDefinitions>
												<ColumnDefinition Width="Auto"/>
												<ColumnDefinition Width="*"/>
												<ColumnDefinition Width="Auto"/>
											</Grid.ColumnDefinitions>

											<Border Width="60" Height="60" CornerRadius="4" Background="#333" Margin="0,0,12,0">
												<Image Source="{Binding CoverImageSource}" Stretch="UniformToFill"/>
											</Border>

											<StackPanel Grid.Column="1" VerticalAlignment="Center">
												<TextBlock Text="{Binding Title}" FontWeight="Bold" FontSize="16" Foreground="White"/>
												<TextBlock Text="{Binding ArtistName}" Foreground="#AAAAAA" FontSize="14" Margin="0,2,0,0"/>
												<StackPanel Orientation="Horizontal" Margin="0,4,0,0">
													<TextBlock Text="{Binding Genre}" Foreground="#1DB954" FontSize="13" Margin="0,0,12,0"/>
													<TextBlock Text="{Binding ReleaseYear, StringFormat='{}{0} г.'}" Foreground="#AAAAAA" FontSize="13"/>
													<TextBlock Text=" | " Foreground="#AAAAAA" FontSize="13" Margin="0,0,4,0"/>
													<TextBlock Text="{Binding SubmittedAt, StringFormat='{}{0:dd.MM.yyyy HH:mm}'}" Foreground="#AAAAAA" FontSize="13"/>
												</StackPanel>
											</StackPanel>

											<StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
												<Button Content="Удалить"
                                                        Background="#444"
                                                        Foreground="White"
                                                        BorderThickness="0"
                                                        Padding="12,6"
                                                        Cursor="Hand"
                                                        Click="DeleteRequest_Click"
                                                        CommandParameter="{Binding}"/>
											</StackPanel>
										</Grid>
									</Border>
								</DataTemplate>
							</ListBox.ItemTemplate>
						</ListBox>

						<Button Content="Удалить все в подтвержденных"
                                Background="#444"
                                Foreground="White"
                                BorderThickness="0"
                                Padding="12,6"
                                Grid.Row="1"
                                HorizontalAlignment="Left"
                                Margin="0,10,0,0"
                                Click="DeleteAllApproved_Click"/>
					</Grid>
				</TabItem>

				<TabItem Header="Отклоненные" Cursor="Hand">
					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition Height="*"/>
							<RowDefinition Height="Auto"/>
						</Grid.RowDefinitions>

						<ListBox x:Name="RejectedRequestsListBox"
                                 Background="#1E1E1E"
                                 Foreground="White"
                                 BorderThickness="0"
                                 ScrollViewer.HorizontalScrollBarVisibility="Disabled"
								  MouseDoubleClick="RejectedRequestsListBox_MouseDoubleClick">
							<ListBox.ItemTemplate>
								<DataTemplate>
									<Border Background="#2C2C2C" CornerRadius="8" Padding="16" Margin="0,4">
										<Grid>
											<Grid.ColumnDefinitions>
												<ColumnDefinition Width="Auto"/>
												<ColumnDefinition Width="*"/>
												<ColumnDefinition Width="Auto"/>
											</Grid.ColumnDefinitions>

											<Border Width="60" Height="60" CornerRadius="4" Background="#333" Margin="0,0,12,0">
												<Image Source="{Binding CoverImageSource}" Stretch="UniformToFill"/>
											</Border>

											<StackPanel Grid.Column="1" VerticalAlignment="Center">
												<TextBlock Text="{Binding Title}" FontWeight="Bold" FontSize="16" Foreground="White"/>
												<TextBlock Text="{Binding ArtistName}" Foreground="#AAAAAA" FontSize="14" Margin="0,2,0,0"/>
												<StackPanel Orientation="Horizontal" Margin="0,4,0,0">
													<TextBlock Text="{Binding Genre}" Foreground="#1DB954" FontSize="13" Margin="0,0,12,0"/>
													<TextBlock Text="{Binding ReleaseYear, StringFormat='{}{0} г.'}" Foreground="#AAAAAA" FontSize="13"/>
													<TextBlock Text=" | " Foreground="#AAAAAA" FontSize="13" Margin="0,0,4,0"/>
													<TextBlock Text="{Binding SubmittedAt, StringFormat='{}{0:dd.MM.yyyy HH:mm}'}" Foreground="#AAAAAA" FontSize="13"/>
												</StackPanel>
											</StackPanel>

											<StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
												<Button Content="Удалить"
                                                        Background="#444"
                                                        Foreground="White"
                                                        BorderThickness="0"
                                                        Padding="12,6"
                                                        Cursor="Hand"
                                                        Click="DeleteRequest_Click"
                                                        CommandParameter="{Binding}"/>
											</StackPanel>
										</Grid>
									</Border>
								</DataTemplate>
							</ListBox.ItemTemplate>
						</ListBox>

						<Button Content="Удалить все в отклоненных"
                                Background="#444"
                                Foreground="White"
                                BorderThickness="0"
                                Padding="12,6"
                                Grid.Row="1"
                                HorizontalAlignment="Left"
                                Margin="0,10,0,0"
                                Click="DeleteAllRejected_Click"/>
					</Grid>
				</TabItem>
			</TabControl>
			<Border Grid.Row="1" Background="#181818" Height="80" Margin="0,353,0,42">
				<Grid Margin="16,0">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="Auto"/>
						<ColumnDefinition Width="*"/>
						<ColumnDefinition Width="Auto"/>
					</Grid.ColumnDefinitions>

					<StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
						<Border Width="60" Height="60" CornerRadius="6" Background="#333" Margin="0,0,12,0">
							<Image Source="{Binding CurrentTempSong.CoverImage, TargetNullValue={StaticResource DefaultCover}}" Stretch="UniformToFill"/>
						</Border>
						<StackPanel VerticalAlignment="Center">
							<TextBlock Text="{Binding CurrentTempSong.Title, TargetNullValue='—'}" 
                               Foreground="White" FontWeight="SemiBold" FontSize="16"/>
							<TextBlock Text="{Binding CurrentTempSong.Artist.Name, TargetNullValue='—'}" 
                               Foreground="#AAAAAA" FontSize="14"/>
						</StackPanel>
					</StackPanel>


					<StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" Width="537">
						<Button x:Name="PrevButton" Width="40" Height="40" Background="Transparent" BorderThickness="0" Margin="0,0,12,0" Click="PrevButton_Click">
							<materialDesign:PackIcon Kind="SkipPrevious" Foreground="White" Width="24" Height="24" VerticalAlignment="Center" HorizontalAlignment="Center"/>
						</Button>
						<Button x:Name="PlayPauseButton"
        Width="52" Height="52"
        Background="White"
        BorderThickness="0"
        Cursor="Hand"
        Click="PlayPauseButton_Click"
        Margin="0,0,12,0"
        HorizontalAlignment="Center"
        VerticalAlignment="Center">

							<Grid>
								<Path x:Name="PlayIcon"
              Data="M0,0 L0,24 L20,12 Z"
              Fill="#121212"
              Stretch="Uniform"
              HorizontalAlignment="Center"
              VerticalAlignment="Center"
              Width="20" Height="20"/>

								<Grid x:Name="PauseIcon"
              Visibility="Collapsed"
              HorizontalAlignment="Center"
              VerticalAlignment="Center">
									<Rectangle Width="4" Height="18" Fill="#121212" Margin="0,0,9,0" Cursor=""/>
									<Rectangle Width="4" Height="18" Fill="#121212" Margin="9,0,0,0"/>
								</Grid>
							</Grid>
						</Button>
						<Button x:Name="NextButton" Width="40" Height="40" Background="Transparent" BorderThickness="0" Click="NextButton_Click">
							<materialDesign:PackIcon Kind="SkipNext" Foreground="White" Width="24" Height="24" HorizontalAlignment="Center" VerticalAlignment="Center"/>
						</Button>

						<Slider x:Name="ProgressSlider" 
            Value="{Binding PlayerService.PositionInSeconds, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
            Minimum="0" 
            Maximum="{Binding PlayerService.DurationInSeconds}" 
            Width="200" 
            Margin="16,0,16,0"
            Style="{StaticResource MediaPlayerSliderStyle}" 
            Height="27"
            Thumb.DragStarted="ProgressSlider_DragStarted"
            Thumb.DragCompleted="ProgressSlider_DragCompleted"
            ValueChanged="ProgressSlider_ValueChanged"/>

						<TextBlock Text="{Binding PlayerService.PositionInSeconds, Converter={StaticResource SecondsToTimeStringConverter}}" 
               Foreground="#AAAAAA" FontSize="12" VerticalAlignment="Center"/>
					</StackPanel>

					<StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
						<materialDesign:PackIcon Kind="VolumeHigh" Foreground="#AAAAAA" Width="20" Height="19" Margin="0,0,4,0"/>
						<Slider x:Name="VolumeSlider" 
                        Value="{Binding PlayerService.Volume, Mode=TwoWay}" 
                        Minimum="0" Maximum="1" 
                        Width="80" 
                        Style="{StaticResource VolumeSliderStyle}"/>
					</StackPanel>
				</Grid>
			</Border>
		</Grid>
	</Border>

	<Window.Triggers>
		<EventTrigger RoutedEvent="Window.Loaded">
			<BeginStoryboard>
				<Storyboard>
					<DoubleAnimation Storyboard.TargetProperty="Opacity" From="0" To="1" Duration="0:0:0.3"/>
					<DoubleAnimation Storyboard.TargetName="MainContainer"
                                     Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleX)"
                                     From="0.9" To="1" Duration="0:0:0.3"/>
					<DoubleAnimation Storyboard.TargetName="MainContainer"
                                     Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleY)"
                                     From="0.9" To="1" Duration="0:0:0.3"/>
				</Storyboard>
			</BeginStoryboard>
		</EventTrigger>
	</Window.Triggers>
</Window>
